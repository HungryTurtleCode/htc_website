---
id: 146
title: Fun with jQuery Keyboard Events Part 2
date: 2016-01-03T01:55:46+00:00
author: Adrian
layout: post
guid: https://hungryturtlecode.com/?p=146
permalink: /tutorials/jquery-keyboard-events-part-2/
factory_shortcodes_assets:
  - 'a:0:{}'
per-page-ath-content:
  - '<title>Key Strokes In jQuery - Hungry Turtle Code</title>'
crp_related_posts:
  - '<div class="crp_related "><h3>You Might Also Find These Interesting...</h3><ul><li><a href="https://hungryturtlecode.com/tutorials/jquery-keyboard-events/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_crop,h_200,w_200,x_77,y_0/h_150,w_150/v1450671694/other-side-jquery-tutorial_ndl1kx.jpg" alt="Fun with jQuery Keyboard Events" title="Fun with jQuery Keyboard Events" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/tutorials/jquery-keyboard-events/"     class="crp_title">Fun with jQuery Keyboard Events</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/2-ng-controller-scope/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932261/Angular-quiz-part-2_j1jjhy.jpg" alt="AngularJS Quiz App Tutorial Part 2 &#8211; Controller Properties and $scope" title="AngularJS Quiz App Tutorial Part 2 &#8211; Controller Properties and $scope" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/2-ng-controller-scope/"     class="crp_title">AngularJS Quiz App Tutorial Part 2 &#8211; Controller&hellip;</a></li><li><a href="https://hungryturtlecode.com/code-projects/1-build-angular-quiz-app-scratch/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_crop,h_400,w_400,x_0,y_0/h_150,w_150/v1463876657/Angular-Quiz-App_kifpk9.jpg" alt="Build An Angular Quiz App From Scratch" title="Build An Angular Quiz App From Scratch" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/1-build-angular-quiz-app-scratch/"     class="crp_title">Build An Angular Quiz App From Scratch</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/8-dependency-injection/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932306/Angular-quiz-part-8_imuigb.jpg" alt="AngularJS Quiz App Tutorial Part 8 &#8211; Dependency Injection" title="AngularJS Quiz App Tutorial Part 8 &#8211; Dependency Injection" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/8-dependency-injection/"     class="crp_title">AngularJS Quiz App Tutorial Part 8 &#8211; Dependency&hellip;</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/7-angular-services/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932298/Angular-quiz-part-7_hy22ev.jpg" alt="AngularJS Quiz App Tutorial Part 7 &#8211; Factories and Services" title="AngularJS Quiz App Tutorial Part 7 &#8211; Factories and Services" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/7-angular-services/"     class="crp_title">AngularJS Quiz App Tutorial Part 7 &#8211; Factories and&hellip;</a></li><li><a href="https://hungryturtlecode.com/news/jquery-3/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/q_61/c_crop,h_400,w_400,x_0,y_0/h_150,w_150/v1453162454/3.0_r5uwii.jpg" alt="jQuery 3.0 &#8211; One jQuery To Rule Them All!!" title="jQuery 3.0 &#8211; One jQuery To Rule Them All!!" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/news/jquery-3/"     class="crp_title">jQuery 3.0 &#8211; One jQuery To Rule Them All!!</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/12-controller-logic/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932332/Angular-quiz-part-12_sfbie2.jpg" alt="AngularJS Quiz App Tutorial Part 12 – Controller Logic" title="AngularJS Quiz App Tutorial Part 12 – Controller Logic" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/12-controller-logic/"     class="crp_title">AngularJS Quiz App Tutorial Part 12 – Controller Logic</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/17-final-prompt/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932361/Angular-quiz-part-17_blwjwc.jpg" alt="AngularJS Quiz App Tutorial Part 17 – Final Prompt Before Results" title="AngularJS Quiz App Tutorial Part 17 – Final Prompt Before Results" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/17-final-prompt/"     class="crp_title">AngularJS Quiz App Tutorial Part 17 – Final Prompt Before&hellip;</a></li></ul><div class="crp_clear"></div></div>'
image: https://res.cloudinary.com/djxscnpzf/image/upload/v1452201151/keyboardpart2_jyf4dm.jpg
categories:
  - Javascript
  - jQuery
  - Tutorials
---
## What Is This Modular JavaScript You Speak Of?

This is part 2 of this mini series recreating the &#8220;Other Side&#8221; video effect using jQuery keyboard events. If you haven&#8217;t seen [part 1](https://hungryturtlecode.com/tutorials/jquery-keyboard-events/), go take a look at that first.

In this tutorial we will take the exact code from the previous part and modularise it. What I mean by that is we don&#8217;t have everything in one place. We split the code out so that each part of the code only does one specific job.

For example you don&#8217;t check if the key is pressed then have the code to handle what happens when the code is pressed together. You separate them out.

What this does is makes everything easier to read and understand at a glance. Rather than having to read the code line by line to get an understanding of what is going on.

## Video Tutorial. Text Tutorial Below.

<div class="embedoverlay overlay" style="background: url(https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_775/v1452226499/fun_with_keyboard_events4_h4y1zr.jpg);">
  <div class="embedoverlaycont ">
    <div class="g-ytsubscribe" data-channelid="UC7Vxnf06GP6w42Lg3TQLXSw" data-layout="default" data-count="default" data-onytevent="onYtEvent">
    </div>
    
    <h2 class="optinform">
      Get all my latest content and exclusive offers direct to your inbox
    </h2>
    
    <p class="optinform">
      Just enter you email below
    </p>
    
    <div class="embedform optinform">
    </div>
    
    <p class="embedreturn">
      <small>Go back to the video</small>
    </p>
  </div>
</div>

<div class="embedcont"style="width: 100%; text-align: center;">
</div>

<div style="display: inline-block; padding-right: 20px; font-weight: bold; color: red; vertical-align: top; padding-top: 12px;">
  Subscribe To My Channel...
</div>

<div style="margin-top: 5px; display: inline-block">
  <div class="g-ytsubscribe" data-channelid="UC7Vxnf06GP6w42Lg3TQLXSw" data-layout="default" data-count="default" data-onytevent="onYtEvent">
  </div>
</div>

<div id="embedcode" style="display: none;">
</div>

&nbsp;

### How Do We Go About Modularising?

What a great question! I&#8217;m glad you asked. There are many ways to do it but one common way is to create a <a href="https://hungryturtlecode.com/tutorials/javascript-tuts/" target="_blank">JavaScript</a> object that has methods (similar to functions). Each of these methods then handles a specific task within your application and then calls other methods when other tasks are required.

**Don&#8217;t worry if you don&#8217;t understand objects and methods and all that fancy stuff.** Just follow along for now. We want to get you creating cool things for now. Worry about the rest later.

To start with, we will create an object called doubleSided.

<pre class="lang:js decode:true " title="A JavaScript Object">var doubleSided = {

};</pre>

If you are thinking it looks kinda like declaring a variable, you would be correct.

## Efficiency!! GIVE ME MORE EFFICIENCY!!

I briefly mentioned this in the first video. Every time you make a jQuery selector call like <span class="lang:js decode:true crayon-inline ">$(&#8216;.element&#8217;)</span> , jQuery will scan the entire document to find it. So if you are making multiple calls to the same element &#8211; for example, every time a key is pressed &#8211; you are wasting a lot of resources.

Why not just scan once for an element you know you will need a lot and then just save it? This would be smart! This is known as caching.

Being the clever JS developers that we all are, we decide to scan for everything we need once and just cache it all.

To cache a jQuery selector all we need to do is set it equal to a variable.

<span class="lang:js decode:true crayon-inline ">var cachedElement = $(&#8216;.element&#8217;);</span>  scans to document once and finds all elements with the class of &#8220;element&#8221; then saves that into a variable.

Now next time we need that we can just reference the variable &#8220;cachedElement&#8221; instead of scanning the whole document again.

### What about the objects?

Let&#8217;s now get back to the object we created earlier. Inside that object we want to create a method that will initialise our application &#8211; let&#8217;s call it init();

Inside this method, we want to call all the methods we need to get our app started. Namely, we will need to call a method to cache the DOM and call a method to bind all these elements to the events we want to monitor (play, pause, keyup and keydown). I will also add a further method to set the volume like we did in the [previous part](https://hungryturtlecode.com/tutorials/jquery-keyboard-events/).

<pre class="lang:js decode:true" title="Our Object with Init method">var doubleSided = {
    init: function(){
        this.cacheDom();
        this.setVolume();
        this.bindEvents();
    }
};</pre>

To create methods, we simply type the name of the method followed by a colon &#8211; then the function you want. Note you can also create object properties (which are like variables within the object) in this same manner. <span class="lang:js decode:true crayon-inline ">property: &#8220;variable&#8221;</span> would be valid.

Within this init function we are calling three other methods from within the object (which we haven&#8217;t created yet). Notice that we use the keyword &#8220;this&#8221;. What that means is that we are telling javascript that we want to call a method, but it should look for that method inside _this_ object. ie. it is a method contained within the current object.

If we were to simply call cacheDom, JavaScript would look for a function called cacheDom **OUTSIDE** of the object. Using &#8220;this&#8221; tells it that is actually within the object.

<pre class="lang:js decode:true" title="Some More Methods">var doubleSided = {
    init: function(){
        this.cacheDom();
        this.setVolume();
        this.bindEvents();
    },
    cacheDom: function(){

    },
    bindEvents: function(){

    },
    setVolume: function(){

    }
};</pre>

## Give Me Your Cache

Let&#8217;s actually add some code to these methods.

Much like when we wanted to create methods that we can call from within the object using the &#8220;this&#8221; keyword, we can create variables, or properties that we can use elsewhere in the object using the &#8220;this&#8221; keyword.

<pre class="lang:js decode:true " title="cacheDom Method">cacheDom: function(){
    this.$lvid = $('#lightvid');
    this.$dvid = $('#darkvid');
    this.$lvidcont = $('#lightvidcont');
    this.$vids = $('video');
    this.$doc = $(document);
},</pre>

Here we have just taken all the jQuery DOM calls from part 1 and set them as properties within our object. This is our cacheDom method complete.

### We Are In A Bind

Now let&#8217;s take all of those properties and bind them to the correct events.

<pre class="lang:js decode:true" title="bindEvents Method">bindEvents: function(){
    this.$doc.on('keydown', this.keydownFunc);
    this.$doc.on('keyup', this.keyupFunc);
    this.$vids.on('pause', this.pauseVid);
    this.$vids.on('play', this.playVid);
},</pre>

We are still using the <span class="lang:js decode:true crayon-inline ">.on()</span>  method, but this time instead of attaching that directly to a jQuery selector call, we attach it to the properties we cached. For the callback of each of these we are calling more methods from within the object that we will create next.

Notice how much more modular this approach is. We do not have the logic directly in the callback, we instead call a separate method &#8211; allowing us to keep everything clean.

## This &#8211; A Bit Of Context

The above bindEvents method looks fine. We have taken the code from part one, replaced the jQuery selector call with our cached property and replaced the callback logic with a method call.

It should all work now. WRONG!

The this keyword actually causes some issues here. The issue is something called JavaScript context. I will not go into depth about this because it can be a very deep subject, but I will do my best to explain why it is an issue here.

So as I have explained previously, the this keyword tells JavaScript to look inside our object. Unfortunately, that is not always true. The this keyword, references the current &#8220;context&#8221;. For our purposes, the context will usually be the object, so the original definition is correct.

### .on() Changes Everything

Now when we call a method from within <span class="lang:js decode:true crayon-inline ">.on()</span> , the context within that method changes to the element that <span class="lang:js decode:true crayon-inline ">.on()</span>  is attached to.

For example, we call this.keydownFunc from within the on keydown method call. Now we skip forward to inside the keydownFunc method and we call <span class="lang:js decode:true crayon-inline ">this.$lvid</span> , we would expect our cached variable of $lvid to be found.

But in this case, that call will return undefined! The reason for this is the context has changed. The <span class="lang:js decode:true crayon-inline ">.on()</span>  method that invoked the keydownFunc method was attached to our cached variable for the <span class="lang:js decode:true crayon-inline ">$(&#8216;document&#8217;)</span> , which means that the context within the keydownFunc method changes from our doubleSided object to the jQuery <span class="lang:js decode:true crayon-inline ">$(&#8216;document&#8217;)</span>  call.

Calling <span class="lang:js decode:true crayon-inline ">this.$lvid</span>  from inside the keydownFunc is equivalent to calling <span class="lang:js decode:true crayon-inline ">$(&#8216;document&#8217;).$lvid</span>  which of course doesn&#8217;t exist.

I know this may seem very complicated and confusing. I will do a full tutorial on context soon.

### But How Do We Fix This Problem

Fortunately, the wonderful developers of jQuery realised that this could potentially be a problem and provided us a way to override the changing of context.

The way we do this is with the <span class="lang:js decode:true crayon-inline ">.bind()</span>  method.

<pre class="lang:default decode:true ">bindEvents: function(){
    this.$doc.on('keydown', this.keydownFunc.bind(this));
    this.$doc.on('keyup', this.keyupFunc.bind(this));
    this.$vids.on('pause', this.pauseVid.bind(this));
    this.$vids.on('play', this.playVid.bind(this));
},</pre>

Now we have added <span class="lang:js decode:true crayon-inline ">.bind(this)</span>  on to the end of our method calls.

What the <span class="lang:js decode:true crayon-inline ">.bind()</span>  method does is takes the argument passed into it and says to the method call it is attached to, &#8220;I want you to forget about the context you think you should have, I want you to use the context of the argument I have been given&#8221;.

So by passing &#8220;this&#8221; as the argument, the context inside the bindEvents method (which of course, is our object) will become the context within all of the subsequent method calls. Solving our problem.

## Onwards! Madness In Our Methods.

Set the volume quickly, before we move onto creating the last 4 methods.

<pre class="lang:js decode:true" title="setVolume">setVolume: function(){
    this.$lvid.prop('volume', 0.2);
    this.$dvid.prop('volume', 0.2);
},</pre>

The last 4 methods are keydownFunc, keyupFunc, pauseVid and playVid. Let&#8217;s start with keydownFunc.

At this point it is as simple as taking the code from part 1 and just change the jQuery selector calls to our cached variables.

<pre class="lang:default decode:true">keydownFunc: function(event){
    if(event.keyCode === 82){
         this.$lvidcont.css('top', -2000 + 'px');
         this.$dvid.prop('muted', false);
         this.$lvid.prop('muted', true);
    }
},</pre>

Again, we pass the function an &#8220;event&#8221; argument. The rest is pretty self explanatory if you have seen part 1.

The rest follows on pretty simply&#8230;

<pre class="lang:js decode:true " title="Rest of the Methods">keyupFunc: function(e){
    if(e.keyCode === 82){
        this.$lvidcont.css('top', 0 + 'px');
        this.$lvid.prop('muted', false);
        this.$dvid.prop('muted', true);
    }
},
playVid: function(){
    for(var i = 0; i &lt; 2; i++){
        this.$vids.get(i).play();
    }
},
pauseVid: function(){
    for(var i = 0; i &lt; 2; i++){
        this.$vids.get(i).pause();
    }
}</pre>

## Putting It All Together

Now we have written all the code, lets put it all together and see what we have.

<pre class="lang:js decode:true" title="Final Modular Code">var doubleSided = {
    init: function(){
        this.cacheDom();
        this.setVolume();
        this.bindEvents();
    },
    cacheDom: function(){
        this.$lvid = $('#lightvid');
        this.$dvid = $('#darkvid');
        this.$lvidcont = $('#lightvidcont');
        this.$vids = $('video');
        this.$doc = $(document);
    },
    bindEvents: function(){
        this.$doc.on('keydown', this.keydownFunc.bind(this));
        this.$doc.on('keyup', this.keyupFunc.bind(this));
        this.$vids.on('pause', this.pauseVid.bind(this));
        this.$vids.on('play', this.playVid.bind(this));
    },
    setVolume: function(){
        this.$lvid.prop('volume', 0.2);
        this.$dvid.prop('volume', 0.2);
    },
    keydownFunc: function(e){
        if(e.keyCode === 82){
            this.$lvidcont.css('top', -2000 + 'px');
            this.$dvid.prop('muted', false);
            this.$lvid.prop('muted', true);
        }
    },
    keyupFunc: function(e){
        if(e.keyCode === 82){
            this.$lvidcont.css('top', 0 + 'px');
            this.$lvid.prop('muted', false);
            this.$dvid.prop('muted', true);
        }
    },
    playVid: function(){
        for(var i = 0; i &lt; 2; i++){
            this.$vids.get(i).play();
        }
    },
    pauseVid: function(){
        for(var i = 0; i &lt; 2; i++){
            this.$vids.get(i).pause();
        }
    }
};

doubleSided.init();</pre>

Ahhhhhh! So much better. It is much easier to read and see what is going on at a glance.

The only thing left to do is to call <span class="lang:js decode:true crayon-inline ">doubleSided.init();</span>  from outside our object just to invoke all the code we have written.

Writing code in this fashion has so many benefits such as increased security, increased efficiency, easier readability of code which leads to easier to maintain code &#8211; which of course makes everyone happy.

Hope you enjoyed it! See you soon for <a href="https://hungryturtlecode.com/tutorials/" target="_blank">another tutorial</a>.

Stay hungry and keep coding,

Adrian