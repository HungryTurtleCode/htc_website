---
id: 534
title: 'AngularJS Quiz App Tutorial Part 9 &#8211; More About Factories'
date: 2016-05-22T20:18:05+00:00
author: Adrian
layout: post
guid: https://hungryturtlecode.com/?p=534
permalink: /code-projects/angular-quiz-app/9-angular-factories/
per-page-ath-content:
  - '<title>Part 9 AngularJS Quiz App Tutorial - Hungry Turtle Code</title>'
factory_shortcodes_assets:
  - 'a:1:{s:12:"sociallocker";a:1:{i:0;a:1:{s:2:"id";s:3:"950";}}}'
crp_related_posts:
  - '<div class="crp_related "><h3>You Might Also Find These Interesting...</h3><ul><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/11-bootstrap-well/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932326/Angular-quiz-part-11_jxnkd4.jpg" alt="AngularJS Quiz App Tutorial Part 11 – More Bootstrap" title="AngularJS Quiz App Tutorial Part 11 – More Bootstrap" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/11-bootstrap-well/"     class="crp_title">AngularJS Quiz App Tutorial Part 11 – More Bootstrap</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/18-marking-the-quiz/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932371/Angular-quiz-part-18_eybezd.jpg" alt="AngularJS Quiz App Tutorial Part 18 – Marking The Quiz" title="AngularJS Quiz App Tutorial Part 18 – Marking The Quiz" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/18-marking-the-quiz/"     class="crp_title">AngularJS Quiz App Tutorial Part 18 – Marking The Quiz</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/14-index-for-ng-repeat/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932344/Angular-quiz-part-14_swngy0.jpg" alt="AngularJS Quiz App Tutorial Part 14 – index for Ng-Repeat" title="AngularJS Quiz App Tutorial Part 14 – index for Ng-Repeat" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/14-index-for-ng-repeat/"     class="crp_title">AngularJS Quiz App Tutorial Part 14 – index for Ng-Repeat</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/21-function-with-ng-class/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932387/Angular-quiz-part-21_vaxed8.jpg" alt="AngularJS Quiz App Tutorial Part 21 – A New Way To Use Ng-Class" title="AngularJS Quiz App Tutorial Part 21 – A New Way To Use Ng-Class" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/21-function-with-ng-class/"     class="crp_title">AngularJS Quiz App Tutorial Part 21 – A New Way To Use&hellip;</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/23-angular-ng-if/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932397/Angular-quiz-part-23_gxzkuu.jpg" alt="AngularJS Quiz App Tutorial Part 23 – Ng-If (Again)" title="AngularJS Quiz App Tutorial Part 23 – Ng-If (Again)" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/23-angular-ng-if/"     class="crp_title">AngularJS Quiz App Tutorial Part 23 – Ng-If (Again)</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/13-ng-if/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932337/Angular-quiz-part-13_app4jm.jpg" alt="AngularJS Quiz App Tutorial Part 13 – Ng-if Directive" title="AngularJS Quiz App Tutorial Part 13 – Ng-if Directive" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/13-ng-if/"     class="crp_title">AngularJS Quiz App Tutorial Part 13 – Ng-if Directive</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/15-reusing-code/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932350/Angular-quiz-part-15_xy7gaj.jpg" alt="AngularJS Quiz App Tutorial Part 15 – Reusing Code" title="AngularJS Quiz App Tutorial Part 15 – Reusing Code" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/15-reusing-code/"     class="crp_title">AngularJS Quiz App Tutorial Part 15 – Reusing Code</a></li><li><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/12-controller-logic/"    ><img src="https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/c_crop,h_180,w_180,x_0,y_0/h_150,w_150/v1463932332/Angular-quiz-part-12_sfbie2.jpg" alt="AngularJS Quiz App Tutorial Part 12 – Controller Logic" title="AngularJS Quiz App Tutorial Part 12 – Controller Logic" width="150" height="150" class="crp_thumb crp_featured" /></a><a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/12-controller-logic/"     class="crp_title">AngularJS Quiz App Tutorial Part 12 – Controller Logic</a></li></ul><div class="crp_clear"></div></div>'
image: https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_180/v1463932313/Angular-quiz-part-9_sjwfx2.jpg
categories:
  - Basic Angular Quiz App
---
## Mocking An API Request With Angular Factories

<span style="font-weight: 400;">We have already covered how to build a basic factory when we built the quizMetrics factory in a <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/8-dependency-injection/" target="_blank">previous part</a>. In this part, we will build another factory; this time to mock data coming from an API. Let&#8217;s continue using Angular factories to further separate concerns.</span><!--more-->

Earlier, we mentioned that we won’t be using an actual API in this application but will instead copy and paste the JSON into the scripts. This is what we did for the list data in the list controller.

The only problem with that is that now we have the JSON copied into the list controller and now if we followed that same idea we would copy the quiz JSON into the quiz controller. Things are starting to get messy.

To solve this problem we will create a factory and copy all of the data into that instead (including refactoring the data out of the list controller and into the factory). That way our controllers have no knowledge of where the data is coming from, just that it is getting the data.

This way, we can copy the data in for now, but at a later date we can actually make API requests and put all the logic into the factory and the controller still receives the data in the exact same way. We won’t have to touch the controllers to make this change. Can you see how this allows our application to grow over time?

<span style="font-weight: 400;">We don’t have to completely refactor the entire codebase to allow API calls, which is something we would have to do if we copied the data into each controller separately. We now put all that data into a factory and separate all of our concerns. It’s all coming together nicely.</span>

**If you want to see the app for yourself,** [check it out here.](/turtlefacts)

The git repo <a href="https://github.com/adiman9/HungryTurtleFactQuiz" target="_blank">can be found here</a>.

<div id="angularsociallockerbox" style="margin: 50px 0; border-radius: 30px; border: 3px solid #00BCD4; padding: 30px;">
  <h3>
    Download Commented Code And PDFs For This Entire Series
  </h3>
  
  <p>
    Get correct and fully commented code for the start of all 24 parts, plus the finished app. Also get a PDF with the entire 24 chapter tutorial in it, so you can learn anywhere!
  </p>
  
  <p>
    I will also throw in individual PDFs of all chapters, just to allow efficient learning of specific topics.
  </p>
  
  <div class="onp-locker-call" style="display: none;" data-lock-id="onpLock374580">
  </div>
  
  <p>
    I don&#8217;t want to force you to share my stuff to get the real content (I really hate that too). So you will still get 100% of the content &#8211; these bonuses don&#8217;t have any new information in them that you don&#8217;t already have in these articles or on github.
  </p>
  
  <p>
    However, they do make things more convenient for you to learn. So if you want these bonuses and are willing to help me out, just give me a share using one of the buttons above. It is greatly appreciated. Thanks
  </p>
</div>

### Get On With It!

Ok, enough chat, let&#8217;s write some code.

<div class="embedoverlay overlay" style="background: url(https://res.cloudinary.com/djxscnpzf/image/upload/c_scale,w_800/v1457631142/AngularJS-Turtle-Quiz-App-9_xkpzlo.webp);">
  <div class="embedoverlaycont ">
    <div class="g-ytsubscribe" data-channelid="UC7Vxnf06GP6w42Lg3TQLXSw" data-layout="default" data-count="default" data-onytevent="onYtEvent">
    </div>
    
    <h2 class="optinform">
      Get all my latest content and exclusive offers direct to your inbox
    </h2>
    
    <p class="optinform">
      Just enter you email below
    </p>
    
    <div class="embedform optinform">
    </div>
    
    <p class="embedreturn">
      <small>Go back to the video</small>
    </p>
  </div>
</div>

<div class="embedcont"style="width: 100%; text-align: center;">
</div>

<div style="display: inline-block; padding-right: 20px; font-weight: bold; color: red; vertical-align: top; padding-top: 12px;">
  Subscribe To My Channel...
</div>

<div style="margin-top: 5px; display: inline-block">
  <div class="g-ytsubscribe" data-channelid="UC7Vxnf06GP6w42Lg3TQLXSw" data-layout="default" data-count="default" data-onytevent="onYtEvent">
  </div>
</div>

<div id="embedcode" style="display: none;">
</div>

&nbsp;

[The next part can be found here](https://hungryturtlecode.com/code-projects/angular-quiz-app/10-ng-class/)

<span style="font-weight: 400;">We will create another script in the factories directory and call it dataservice.js. We will start this in the exact same way we started the quizMetrics factory.</span>

<pre class="lang:js decode:true" title="Start of the dataservice factory">(function(){

    angular
        .module("turtleFacts")
        .factory("DataService", DataService);


    function DataService(){

        var dataObj = {
            // We will add properties to this object soon
        };

        return dataObj;
    }

})();</pre>

Now we will add the object we will return and start adding in some of the data that we need. The turtlesData variable that contained the JSON from our list controller will be copied over into this factory and we will create a new variable to hold the JSON for the quiz questions.

<pre class="lang:js decode:true" title="Adding the data to the object">function DataService(){

    var dataObj = {
        turtlesData: turtlesData,
        quizQuestions: quizQuestions
    };

    return dataObj;
}</pre>

We can see that we have created some entries in the dataObj which reference variables that contain JSON that we have copied into the script at the bottom. This is then returned from the factory so that our controllers can use this data.

The turtlesData is the exact same JSON as we used before. The quizQuestions is new JSON which can be seen here:

<pre class="height-set:true lang:js decode:true" title="QuizQuestions JSON">var quizQuestions  = [
        {
            type: "text",
            text: "How much can a loggerhead weigh?",
            possibilities: [
                {
                    answer: "Up to 20kg"
                },
                {
                    answer: "Up to 115kg"
                },
                {
                    answer: "Up to 220kg"
                },
                {
                    answer: "Up to 500kg"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "What is the typical lifespan of a Green Sea Turtle?",
            possibilities: [
                {
                    answer: "150 years"
                },
                {
                    answer: "10 years"
                },
                {
                    answer: "80 years"
                },
                {
                    answer: "40 years"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "image",
            text: "Which of these is the Alligator Snapping Turtle?",
            possibilities: [
                {
                    answer: "https://c1.staticflickr.com/3/2182/2399413165_bcc8031cac_z.jpg?zz=1"
                },
                {
                    answer: "http://images.nationalgeographic.com/wpf/media-live/photos/000/006/cache/ridley-sea-turtle_688_600x450.jpg"
                },
                {
                    answer: "https://static-secure.guim.co.uk/sys-images/Guardian/Pix/pictures/2011/8/13/1313246505515/Leatherback-turtle-007.jpg"
                },
                {
                    answer: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Alligator_snapping_turtle_-_Geierschildkr%C3%B6te_-_Alligatorschildkr%C3%B6te_-_Macrochelys_temminckii_01.jpg"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "image",
            text: "Which of these is the Green Turtle?",
            possibilities: [
                {
                    answer: "http://www.what-do-turtles-eat.com/wp-content/uploads/2014/10/Sea-Turtles-Habitat.jpg"
                },
                {
                    answer: "https://upload.wikimedia.org/wikipedia/commons/7/7f/Kemp's_Ridley_sea_turtle_nesting.JPG"
                },
                {
                    answer: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Alligator_snapping_turtle_-_Geierschildkr%C3%B6te_-_Alligatorschildkr%C3%B6te_-_Macrochelys_temminckii_01.jpg"
                },
                {
                    answer: "http://assets.worldwildlife.org/photos/163/images/carousel_small/SCR_290360hawskbill-why-matter-LG.jpg?1345565532"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "Where does the Kemp's Ridley Sea Turtle live?'",
            possibilities: [
                {
                    answer: "Tropical waters all around the world"
                },
                {
                    answer: "Eastern Australia"
                },
                {
                    answer: "Coastal North Atlantic"
                },
                {
                    answer: "South pacific islands"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "What is the most common turtle in US waters?",
            possibilities: [
                {
                    answer: "Loggerhead turtle"
                },
                {
                    answer: "Leatherback turtle"
                },
                {
                    answer: "Hawksbill Turtle"
                },
                {
                    answer: "Alligator Snapping Turtle"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "What is the largest sea turtle on earth?",
            possibilities: [
                {
                    answer: "Eastern Snake Necked Turtle"
                },
                {
                    answer: "Olive Ridley Sea Turtle"
                },
                {
                    answer: "Kemp's Ridley Sea Turtle'"
                },
                {
                    answer: "Leatherback"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "image",
            text: "Which of these is the Olive Ridley Turtle?",
            possibilities: [
                {
                    answer: "http://i.telegraph.co.uk/multimedia/archive/02651/loggerheadTurtle_2651448b.jpg"
                },
                {
                    answer: "http://assets.worldwildlife.org/photos/163/images/carousel_small/SCR_290360hawskbill-why-matter-LG.jpg?1345565532"
                },
                {
                    answer: "http://images.nationalgeographic.com/wpf/media-live/photos/000/006/cache/ridley-sea-turtle_688_600x450.jpg"
                },
                {
                    answer: "https://upload.wikimedia.org/wikipedia/commons/7/7f/Kemp's_Ridley_sea_turtle_nesting.JPG"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "How Heavy can a leatherback turtle be?",
            possibilities: [
                {
                    answer: "900kg"
                },
                {
                    answer: "40kg"
                },
                {
                    answer: "110kg"
                },
                {
                    answer: "300kg"
                }
            ],
            selected: null,
            correct: null
        },
        {
            type: "text",
            text: "Which of these turtles are herbivores?",
            possibilities: [
                {
                    answer: "Loggerhead Turtle"
                },
                {
                    answer: "Hawksbill Turtle"
                },
                {
                    answer: "Leatherback Turtle"
                },
                {
                    answer: "Green Turtle"
                }
            ],
            selected: null,
            correct: null
        }
    ];</pre>

<span style="font-weight: 400;">Taking a closer look at the JSON for each quiz question we see that it has a type (text, or image) which allows us to have different styles of questions, the text of the question itself, four possible answers and two flags called selected and correct which are initialised to null. We will discuss all of this more later.</span>

## Angular Factories leads to Dependency Injection

<span style="font-weight: 400;">We have seen it all before. So we will just go back to our controllers and add the “dataservice” factory to the array of dependencies. Also adding it as an argument to the controller functions. </span>

Here is the quiz controller:

<pre class="lang:js decode:true" title="Quiz Controller">(function(){

    angular
        .module("turtleFacts")
        .controller("quizCtrl", QuizController);

    QuizController.$inject = ['quizMetrics', 'DataService'];

    function QuizController(quizMetrics, DataService){
        var vm = this;

        vm.quizMetrics = quizMetrics; 
        vm.dataService = DataService;
        
    }

})();</pre>

We also do the same in the list controller. While we are in there we can delete the turtlesData variable that we now have in the factory (if you haven’t already removed it).

<pre class="lang:js decode:true" title="List Controller">(function(){

    angular
        .module("turtleFacts")
        .controller("listCtrl", ListController);

    ListController.$inject = ['quizMetrics', 'DataService'];

    function ListController(quizMetrics, DataService){

        var vm = this;
        
        vm.quizMetrics = quizMetrics;
        vm.data = DataService.turtlesData; 
        vm.activeTurtle = {}; 
        vm.changeActiveTurtle = changeActiveTurtle; 
        vm.activateQuiz = activateQuiz; 
        vm.search = ""; 

        function changeActiveTurtle(index){
            vm.activeTurtle = index;
        }

        function activateQuiz(){
            quizMetrics.changeState(true);
        }
    }

})();</pre>

Notice that we previously had a line <span class="lang:js decode:true crayon-inline">vm.data = turtlesData</span>  but of course, the turtlesData variable doesn’t exist in the controller, it is now inside the dataservice factory. So we change that line to <span class="lang:js decode:true crayon-inline  ">vm.data = DataService.turtlesData</span> .

Before we forget, we need to add the new dataservice factory script to the tags at the bottom of our HTML. The scripts area of the HTML now looks like this:

<pre class="lang:xhtml decode:true" title="Application Scripts">&lt;script src="js/app.js"&gt;&lt;/script&gt;
&lt;script src="js/controllers/list.js"&gt;&lt;/script&gt;
&lt;script src="js/controllers/quiz.js"&gt;&lt;/script&gt;   
&lt;script src="js/factories/quizMetrics.js"&gt;&lt;/script&gt;
&lt;script src="js/factories/dataservice.js"&gt;&lt;/script&gt;</pre>

### Onwards And Upwards

In <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/10-ng-class/" target="_blank">part 10</a> we will use the quiz JSON we now have access to and start creating the bootstrap markup for the quiz.

See you over there.

Adrian

&nbsp;

### Check Out The Whole Course Index

<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/1-build-angular-quiz-app-scratch/">Getting Started</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/2-ng-controller-scope/">Ng-controller directive and the (mis)use of $scope</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/3-ng-repeat-directive/">Looping around with the ng-repeat directive</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/4-bootstrap-modal/">Markup for the Bootstrap Modal</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/5-angular-filters/">Using Angular Filters to create real time search</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/6-ng-click-directive/">The powerful ng-click directive</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/7-angular-services/">Services in Angular make everything easier</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/8-dependency-injection/">What is this infamous dependency injection in Angular?</a>
</li>
<li style="font-weight: 400;">
  <em>You are here</em>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/10-ng-class/">The ng-class directive</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/11-bootstrap-well/">More Bootstrap Markup &#8211; The Well</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/12-controller-logic/">Adding some logic to the controller</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/13-ng-if/">Making things disappear with ng-if</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/14-index-for-ng-repeat/">The $index property for ng-repeat</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/15-reusing-code/">Reusing code is always a good idea</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/16-bootstrap-alerts/">Using Bootstrap to help with styling error messages</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/17-final-prompt/">The final prompt after the quiz</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/18-marking-the-quiz/">Marking the quiz</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/19-angular-dependency-injection/">More dependency injection</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/20-familiar-bootstrap/">Reusing and slightly modifying some previous Bootstrap</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/21-function-with-ng-class/">More than one way to use ng-class</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/22-angular-number-filter/">Another Angular Filter</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/23-angular-ng-if/">More usage of Ng-if</a>
</li>
<li style="font-weight: 400;">
  <a href="https://hungryturtlecode.com/code-projects/angular-quiz-app/24-finished-angular-project/">Finishing The App</a>
</li>

Please give this post a share if you enjoyed it. _Everyone_ needs that **awesome friend** to send them amazing stuff.